{"ast":null,"code":"import _regeneratorRuntime from\"/Users/poojapasupu/Documents/GitHub-repos/React-Redux-simple-shopping-cart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/poojapasupu/Documents/GitHub-repos/React-Redux-simple-shopping-cart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{uiSliceActions}from\"./ui-slice\";import{cartActions}from\"./cart-slice\";export var sendCartData=function sendCartData(cart){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dipatchFn){var sendData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:sendData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://react-http-55fae-default-rtdb.firebaseio.com/cart.json\",{method:\"PUT\",body:JSON.stringify({items:cart.items,totalQuantity:cart.totalQuantity})});case 2:response=_context.sent;if(response.ok){_context.next=5;break;}throw new Error(\"Error sending data!\");case 5:case\"end\":return _context.stop();}}},_callee);}));return function sendData(){return _ref2.apply(this,arguments);};}();_context2.prev=1;dipatchFn(uiSliceActions.showNotification({status:\"pending\",title:\"Sending...\",message:\"Sending cart data!\"}));_context2.next=5;return sendData();case 5:dipatchFn(uiSliceActions.showNotification({status:\"success\",title:\"Successful\",message:\"Succesfully Sent Data!\"}));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dipatchFn(uiSliceActions.showNotification({status:\"error\",title:\"Error occurred\",message:\"Error occurred in sending the data!\"}));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var receiveCartData=function receiveCartData(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatchFn){var receiveData,cartDatafromFetch;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:receiveData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"https://react-http-55fae-default-rtdb.firebaseio.com/cart.json\");case 2:response=_context3.sent;if(response.ok){_context3.next=5;break;}throw new Error(\"Error receiving data!\");case 5:_context3.next=7;return response.json();case 7:data=_context3.sent;return _context3.abrupt(\"return\",data);case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function receiveData(){return _ref4.apply(this,arguments);};}();_context4.prev=1;_context4.next=4;return receiveData();case 4:cartDatafromFetch=_context4.sent;dispatchFn(cartActions.replaceCart({items:cartDatafromFetch.items||[],totalQuantity:cartDatafromFetch.totalQuantity}));_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](1);dispatchFn(uiSliceActions.showNotification({status:\"error\",title:\"Error occurred\",message:\"Error occurred in fetching the data!\"}));case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[1,8]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/poojapasupu/Documents/GitHub-repos/React-Redux-simple-shopping-cart/src/store/cart-actions.js"],"names":["uiSliceActions","cartActions","sendCartData","cart","dipatchFn","sendData","fetch","method","body","JSON","stringify","items","totalQuantity","response","ok","Error","showNotification","status","title","message","receiveCartData","dispatchFn","receiveData","json","data","cartDatafromFetch","replaceCart"],"mappings":"+XAAA,OAASA,cAAT,KAA+B,YAA/B,CACA,OAASC,WAAT,KAA4B,cAA5B,CAGA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,IAAD,CAAU,CACpC,+FAAO,kBAAOC,SAAP,mIACCC,QADD,2FACY,sKACQC,CAAAA,KAAK,CAC1B,gEAD0B,CAE1B,CACEC,MAAM,CAAE,KADV,CAEEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAACC,KAAK,CAAER,IAAI,CAACQ,KAAb,CAAoBC,aAAa,CAAET,IAAI,CAACS,aAAxC,CAAf,CAFR,CAF0B,CADb,QACTC,QADS,kBAQVA,QAAQ,CAACC,EARC,8BASP,IAAIC,CAAAA,KAAJ,CAAU,qBAAV,CATO,uDADZ,kBACCV,CAAAA,QADD,6DAcHD,SAAS,CACPJ,cAAc,CAACgB,gBAAf,CAAgC,CAC9BC,MAAM,CAAE,SADsB,CAE9BC,KAAK,CAAE,YAFuB,CAG9BC,OAAO,CAAE,oBAHqB,CAAhC,CADO,CAAT,CAdG,uBAqBGd,CAAAA,QAAQ,EArBX,QAuBHD,SAAS,CACPJ,cAAc,CAACgB,gBAAf,CAAgC,CAC9BC,MAAM,CAAE,SADsB,CAE9BC,KAAK,CAAE,YAFuB,CAG9BC,OAAO,CAAE,wBAHqB,CAAhC,CADO,CAAT,CAvBG,mFA+BHf,SAAS,CACPJ,cAAc,CAACgB,gBAAf,CAAgC,CAC9BC,MAAM,CAAE,OADsB,CAE9BC,KAAK,CAAE,gBAFuB,CAG9BC,OAAO,CAAE,qCAHqB,CAAhC,CADO,CAAT,CA/BG,sEAAP,+DAwCD,CAzCM,CA2CP,MAAO,IAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CACnC,gGAAO,kBAAOC,UAAP,wJACCC,WADD,2FACe,iLACKhB,CAAAA,KAAK,CAC1B,gEAD0B,CADV,QACZO,QADY,mBAKbA,QAAQ,CAACC,EALI,+BAMV,IAAIC,CAAAA,KAAJ,CAAU,uBAAV,CANU,+BAQCF,CAAAA,QAAQ,CAACU,IAAT,EARD,QAQZC,IARY,iDASXA,IATW,0DADf,kBACCF,CAAAA,WADD,oFAc+BA,CAAAA,WAAW,EAd1C,QAcKG,iBAdL,gBAeDJ,UAAU,CAACpB,WAAW,CAACyB,WAAZ,CAAwB,CACjCf,KAAK,CAAEc,iBAAiB,CAACd,KAAlB,EAA2B,EADD,CAEjCC,aAAa,CAAEa,iBAAiB,CAACb,aAFA,CAAxB,CAAD,CAAV,CAfC,mFAqBDS,UAAU,CACRrB,cAAc,CAACgB,gBAAf,CAAgC,CAC9BC,MAAM,CAAE,OADsB,CAE9BC,KAAK,CAAE,gBAFuB,CAG9BC,OAAO,CAAE,sCAHqB,CAAhC,CADQ,CAAV,CArBC,sEAAP,iEA8BD,CA/BM","sourcesContent":["import { uiSliceActions } from \"./ui-slice\";\nimport { cartActions } from \"./cart-slice\";\n\n\nexport const sendCartData = (cart) => {\n  return async (dipatchFn) => {\n    const sendData = async () => {\n      const response = await fetch(\n        \"https://react-http-55fae-default-rtdb.firebaseio.com/cart.json\",\n        {\n          method: \"PUT\",\n          body: JSON.stringify({items: cart.items, totalQuantity: cart.totalQuantity}),\n        }\n      );\n      if (!response.ok) {\n        throw new Error(\"Error sending data!\");\n      }\n    };\n    try {\n      dipatchFn(\n        uiSliceActions.showNotification({\n          status: \"pending\",\n          title: \"Sending...\",\n          message: \"Sending cart data!\",\n        })\n      );\n      await sendData();\n\n      dipatchFn(\n        uiSliceActions.showNotification({\n          status: \"success\",\n          title: \"Successful\",\n          message: \"Succesfully Sent Data!\",\n        })\n      );\n    } catch (error) {\n      dipatchFn(\n        uiSliceActions.showNotification({\n          status: \"error\",\n          title: \"Error occurred\",\n          message: \"Error occurred in sending the data!\",\n        })\n      );\n    }\n  };\n};\n\nexport const receiveCartData = () => {\n  return async (dispatchFn) => {\n    const receiveData = async () => {\n      const response = await fetch(\n        \"https://react-http-55fae-default-rtdb.firebaseio.com/cart.json\"\n      );\n\n      if (!response.ok) {\n        throw new Error(\"Error receiving data!\");\n      }\n      const data = await response.json();\n      return data;\n    };\n\n    try {\n        const cartDatafromFetch = await receiveData();\n        dispatchFn(cartActions.replaceCart({\n          items: cartDatafromFetch.items || [],\n          totalQuantity: cartDatafromFetch.totalQuantity\n      }));\n        \n      } catch (error) {\n        dispatchFn(\n          uiSliceActions.showNotification({\n            status: \"error\",\n            title: \"Error occurred\",\n            message: \"Error occurred in fetching the data!\",\n          })\n        );\n      }\n  };\n};\n"]},"metadata":{},"sourceType":"module"}